<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plotting · DispersiveShallowWater.jl</title><meta name="title" content="Plotting · DispersiveShallowWater.jl"/><meta property="og:title" content="Plotting · DispersiveShallowWater.jl"/><meta property="twitter:title" content="Plotting · DispersiveShallowWater.jl"/><meta name="description" content="Documentation for DispersiveShallowWater.jl."/><meta property="og:description" content="Documentation for DispersiveShallowWater.jl."/><meta property="twitter:description" content="Documentation for DispersiveShallowWater.jl."/><meta property="og:url" content="https://NumericalMathematics.github.io/DispersiveShallowWater.jl/stable/plotting/"/><meta property="twitter:url" content="https://NumericalMathematics.github.io/DispersiveShallowWater.jl/stable/plotting/"/><link rel="canonical" href="https://NumericalMathematics.github.io/DispersiveShallowWater.jl/stable/plotting/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DispersiveShallowWater.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../solvers/">Different Solvers</a></li><li><a class="tocitem" href="../dingemans/">Dingemans</a></li><li><a class="tocitem" href="../dispersion/">Dispersion</a></li><li><a class="tocitem" href="../SBP_Operators/">SBP Operators</a></li><li class="is-active"><a class="tocitem" href>Plotting</a><ul class="internal"><li><a class="tocitem" href="#Variable-Conversion-and-Visualization-Options"><span>Variable Conversion and Visualization Options</span></a></li><li><a class="tocitem" href="#Time-Series-Analysis-at-Spatial-Points"><span>Time Series Analysis at Spatial Points</span></a></li><li><a class="tocitem" href="#Energy-and-Momentum-Evolution"><span>Energy and Momentum Evolution</span></a></li><li><a class="tocitem" href="#Error-Analysis-Visualization"><span>Error Analysis Visualization</span></a></li></ul></li><li><a class="tocitem" href="../miscellaneous/">Miscellaneous</a></li><li><a class="tocitem" href="../development/">Development</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../ref-trixibase/">TrixiBase</a></li><li><a class="tocitem" href="../ref/">DispersiveShallowWater</a></li></ul></li><li><a class="tocitem" href="../changelog/">Changelog</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../code_of_conduct/">Code of Conduct</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Plotting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plotting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NumericalMathematics/DispersiveShallowWater.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NumericalMathematics/DispersiveShallowWater.jl/blob/main/docs/src/plotting.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Plotting-Simulation-Results"><a class="docs-heading-anchor" href="#Plotting-Simulation-Results">Plotting Simulation Results</a><a id="Plotting-Simulation-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-Simulation-Results" title="Permalink"></a></h1><p>DispersiveShallowWater.jl provides flexible plotting capabilities through <a href="https://github.com/JuliaPlots/Plots.jl">Plots.jl</a> recipes. The plotting system supports various conversion functions, visualization options, and analysis tools.</p><h2 id="Variable-Conversion-and-Visualization-Options"><a class="docs-heading-anchor" href="#Variable-Conversion-and-Visualization-Options">Variable Conversion and Visualization Options</a><a id="Variable-Conversion-and-Visualization-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-Conversion-and-Visualization-Options" title="Permalink"></a></h2><p>The plotting system supports different variable conversions and visualization options. You can plot conservative variables, specific physical quantities, and control what additional information is displayed:</p><pre><code class="language-julia hljs">using Plots

# Plot different variable representations

t = 13.37 # plot solution at (roughly) t = 13.37s
step_idx = argmin(abs.(saveat .- t)) # get the closed point to 13.37
p1 = plot(semi =&gt; sol, conversion = prim2prim, plot_bathymetry = false,
          suptitle = &quot;Primitive Variables&quot;, step = step_idx)
p2 = plot(semi =&gt; sol, conversion = prim2cons, plot_bathymetry = false,
          suptitle = &quot;Conservative Variables&quot;, step = step_idx)
p3 = plot(semi =&gt; sol, conversion = waterheight_total, plot_bathymetry = true,
          suptitle = &quot;Total Water Height&quot;, step = step_idx)
p4 = plot(semi =&gt; sol, conversion = velocity, plot_initial = true,
          suptitle = &quot;Velocity with Initial Condition&quot;, step = step_idx)

plot(p1, p2, p3, p4, layout = (2, 2), size = (1000, 700))</code></pre><p><img src="../variable_conversions.png" alt="variable conversions"/></p><h2 id="Time-Series-Analysis-at-Spatial-Points"><a class="docs-heading-anchor" href="#Time-Series-Analysis-at-Spatial-Points">Time Series Analysis at Spatial Points</a><a id="Time-Series-Analysis-at-Spatial-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Time-Series-Analysis-at-Spatial-Points" title="Permalink"></a></h2><p>You can analyze the temporal evolution of the solution at specific spatial locations. This is particularly useful for understanding wave propagation and local dynamics:</p><pre><code class="language-julia hljs"># Analyze solution at a single spatial point
x_location = 0.0

p1 = plot(semi =&gt; sol, x_location, conversion = waterheight_total,
          suptitle = &quot;Water Height Evolution at x = $x_location&quot;)

p2 = plot(semi =&gt; sol, x_location, conversion = velocity,
          suptitle = &quot;Velocity Evolution at x = $x_location&quot;)

plot(p1, p2, layout = (1, 2), size = (800, 400))</code></pre><p><img src="../time_series_analysis.png" alt="time series analysis"/></p><h2 id="Energy-and-Momentum-Evolution"><a class="docs-heading-anchor" href="#Energy-and-Momentum-Evolution">Energy and Momentum Evolution</a><a id="Energy-and-Momentum-Evolution-1"></a><a class="docs-heading-anchor-permalink" href="#Energy-and-Momentum-Evolution" title="Permalink"></a></h2><p>Using the analysis callback results, we can visualize how conserved quantities evolve over time:</p><pre><code class="language-julia hljs"># Plot conservation properties
conservation_data = integrals(analysis_callback2)

p1 = plot(tstops(analysis_callback2), conservation_data.waterheight_total,
          title = &quot;Water Mass Conservation&quot;, xlabel = &quot;t&quot;, ylabel = &quot;∫η&quot;,
          label = &quot;Total water height&quot;, color = :blue)

p2 = plot(tstops(analysis_callback2), conservation_data.velocity,
          title = &quot;Momentum Conservation&quot;, xlabel = &quot;t&quot;, ylabel = &quot;∫v&quot;,
          label = &quot;Total velocity&quot;, color = :red)

p3 = plot(tstops(analysis_callback2), conservation_data.entropy .- conservation_data.entropy[1],
          title = &quot;Energy Conservation\n(with relaxation)&quot;, xlabel = &quot;t&quot;, ylabel = &quot;ΔE&quot;,
          label = &quot;Energy change&quot;, color = :green)

plot(p1, p2, p3, layout = (3, 1), size = (500, 900))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GKS: Possible loss of precision in routine SET_WINDOW</code></pre><p><img src="../conservation_analysis.png" alt="conservation analysis"/></p><h2 id="Error-Analysis-Visualization"><a class="docs-heading-anchor" href="#Error-Analysis-Visualization">Error Analysis Visualization</a><a id="Error-Analysis-Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Error-Analysis-Visualization" title="Permalink"></a></h2><p>Compare the numerical solution with the initial condition evaluated at time t. Note that this represents the analytical solution only if the initial condition function describes an exact solution that varies with time. You can either plot the errors manually or use the built-in plotting recipe with <code>plot(analysis_callback, what = (:errors,))</code>:</p><pre><code class="language-julia hljs"># Calculate and plot errors over time
error_data = errors(analysis_callback2)
time_points = tstops(analysis_callback2)

p1 = plot(time_points, error_data.l2_error[1, :],
          title = &quot;L² Error Evolution&quot;, xlabel = &quot;t&quot;, ylabel = &quot;L² error&quot;,
          label = &quot;η&quot;, color = :blue)
plot!(p1, time_points, error_data.l2_error[2, :],
      label = &quot;v&quot;, color = :red)

p2 = plot(time_points, error_data.linf_error[1, :],
          title = &quot;L∞ Error Evolution&quot;, xlabel = &quot;t&quot;, ylabel = &quot;L∞ error&quot;,
          label = &quot;η&quot;, color = :blue)
plot!(p2, time_points, error_data.linf_error[2, :],
      label = &quot;v&quot;, color = :red)

plot(p1, p2, layout = (1, 2), size = (800, 400))</code></pre><p><img src="../error_analysis.png" alt="error analysis"/></p><p>The plotting system supports all standard Plots.jl features like custom color schemes, annotations, and interactive backends. For more advanced plotting options, consult the <a href="https://docs.juliaplots.org/">Plots.jl documentation</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../SBP_Operators/">« SBP Operators</a><a class="docs-footer-nextpage" href="../miscellaneous/">Miscellaneous »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 29 July 2025 19:34">Tuesday 29 July 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
